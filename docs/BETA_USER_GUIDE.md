# ベータユーザーガイド

**Xフォロワーメーカー Phase 1 MVP**

本番環境: https://xfollowermaker.vercel.app

---

## 🎯 概要

Xフォロワーメーカーは、Google Gemini AIを活用してX（旧Twitter）の投稿を自動生成・投稿し、フォロワー増加を支援するWebアプリケーションです。

**Phase 1 MVP** では以下の機能が利用可能です:

✅ AI自動投稿（Gemini 2.0 Flash）
✅ Twitter OAuth 2.0連携
✅ キーワード設定（最大3つ）
✅ 投稿スケジュール管理
✅ 投稿プレビュー・編集・承認
✅ フォロワー数推移グラフ
✅ 毎時自動投稿（Upstash QStash）
✅ 毎日フォロワー記録

---

## 🚀 クイックスタート（5分）

### 1. アカウント作成

https://xfollowermaker.vercel.app にアクセス

**テストアカウント**（すぐに試したい場合）:
```
Email: test@xfollowermaker.local
Password: DevTest2025!Secure
```

または、新規アカウントを作成:
```
1. 「Sign up」をクリック
2. メールアドレスとパスワードを入力
3. 「Sign up」ボタンをクリック
```

### 2. X（Twitter）連携 ⚠️ 必須

ダッシュボードで「X連携」ボタンをクリック

**重要**: この手順をスキップすると、自動投稿機能が動作しません！

Twitter OAuth画面で以下を承認:
- ツイートの投稿
- ユーザー情報の取得
- フォロワー数の取得

### 3. キーワード設定

興味のあるキーワードを**最大3つ**選択:

利用可能なキーワード:
- プログラミング・技術
- ビジネス・起業
- マーケティング・SNS
- デザイン・クリエイティブ
- AI・機械学習
- ライフハック・生産性
- 健康・フィットネス
- 旅行・グルメ

### 4. 投稿スケジュール設定

1日の投稿回数を設定（3〜5回/日推奨）

**注意**: X API Free Tierの制限は **1,500ツイート/月** です。
- 3回/日 = 90ツイート/月 ✅
- 5回/日 = 150ツイート/月 ✅

### 5. 自動投稿開始 🎉

設定完了後、以下が自動で実行されます:

1. **毎時0分**: AIが投稿を生成・投稿（QStash Cron）
2. **毎日8時**: フォロワー数を記録（QStash Cron）

---

## 📊 機能詳細

### ダッシュボード（`/dashboard`）

**表示内容**:
- 今日の投稿数
- 次の投稿までのカウントダウン
- フォロワー数推移グラフ（過去30日）
- 統計カード（総投稿数、承認待ち、投稿済み）

**操作**:
- キーワード編集
- 投稿スケジュール編集
- X連携/連携解除
- 投稿ページへ移動

### 投稿プレビュー・編集（`/posts`）

**表示内容**:
- 全投稿一覧（フィルタ付き）
  - 全て
  - スケジュール済み
  - 投稿済み
  - 失敗
- 各投稿のプレビュー
- 投稿日時

**操作**:
- ✏️ 編集: 投稿内容を修正
- ✅ 承認: 投稿を承認（自動投稿対象に）
- 🔄 再生成: AIで新しい投稿を生成
- 🗑️ 削除: 投稿を削除
- ➕ 手動投稿追加: カスタム投稿を作成

---

## ⚙️ システム動作

### 自動投稿の流れ

```
1. [毎時0分] QStash Cronがトリガー
   ↓
2. scheduled_at <= 現在時刻 かつ is_approved = true の投稿を取得
   ↓
3. ユーザーのTwitterトークンを取得
   ↓
4. Twitter API v2でツイート投稿
   ↓
5. 成功: status = "posted"、tweet_idを記録
   失敗: status = "failed"、エラーメッセージを記録
```

### フォロワー記録の流れ

```
1. [毎日8時] QStash Cronがトリガー
   ↓
2. Twitter連携済みの全ユーザーを取得
   ↓
3. 各ユーザーのフォロワー数をTwitter APIから取得
   ↓
4. follower_stats テーブルに記録
   ↓
5. ダッシュボードのグラフに反映
```

---

## 🐛 トラブルシューティング

### Q1: 投稿が自動投稿されない

**原因**:
1. Twitter連携していない ❌
2. 投稿が承認されていない（`is_approved = false`）
3. `scheduled_at` が未来の日時

**解決方法**:
1. ダッシュボードで「X連携」を実行
2. 投稿ページで「✅ 承認」をクリック
3. スケジュール日時を確認

### Q2: Twitter OAuth エラーが出る

**原因**:
- Twitter Developer Portalの認証情報が無効
- リダイレクトURLが間違っている

**解決方法**:
1. https://developer.twitter.com/ で認証情報を確認
2. リダイレクトURL: `https://xfollowermaker.vercel.app/api/auth/callback/twitter`

### Q3: フォロワーグラフが表示されない

**原因**:
- Twitter連携していない
- まだフォロワー記録が実行されていない（毎日8時）

**解決方法**:
1. Twitter連携を実行
2. 翌日8時以降にグラフが表示される
3. すぐに確認したい場合: デモデータをセットアップ（開発者向け）

### Q4: 投稿が "failed" になる

**原因**:
- Twitterトークンの有効期限切れ
- X API制限超過
- 投稿内容がTwitterポリシー違反

**解決方法**:
1. Twitter連携を再実行
2. X API使用状況を確認（1,500ツイート/月以内）
3. 投稿内容を編集して再投稿

---

## 📈 推奨設定

### Phase 1 MVP（X API Free Tier）

```yaml
投稿頻度: 3〜5回/日
キーワード: 3つ
投稿時間帯:
  - 朝: 8時
  - 昼: 12時
  - 夕方: 18時
  - 夜: 21時
  - 深夜: 23時

月間投稿数: 90〜150ツイート
API制限: 1,500ツイート/月（余裕あり）
```

### 推奨キーワード組み合わせ

**エンジニア向け**:
- プログラミング・技術
- AI・機械学習
- ライフハック・生産性

**ビジネス向け**:
- ビジネス・起業
- マーケティング・SNS
- ライフハック・生産性

**クリエイター向け**:
- デザイン・クリエイティブ
- マーケティング・SNS
- 旅行・グルメ

---

## 🔒 セキュリティ・プライバシー

### データ保護

✅ **Twitterトークンの暗号化**: AES-256-GCM
✅ **パスワードハッシュ**: bcrypt（saltRounds: 10）
✅ **HTTPS**: Vercel自動SSL
✅ **環境変数**: Vercelで安全に管理

### データ収集

本サービスが収集・保存するデータ:
- メールアドレス
- パスワードハッシュ
- Twitterユーザーid
- 暗号化されたTwitterトークン
- 投稿内容
- フォロワー数統計

本サービスが**収集しない**データ:
- DM（ダイレクトメッセージ）
- フォロワーのプライベート情報
- ツイート以外のTwitter活動

### データ削除

アカウント削除時に全てのデータを削除します:
- ユーザーアカウント
- 投稿履歴
- フォロワー統計
- Twitterトークン

---

## 📝 フィードバック

バグ報告・機能リクエストは以下へ:

- **GitHub Issues**: https://github.com/sintaro608742-crypto/x-follower-maker/issues
- **Email**: （開発者メールアドレス）

---

## 🎯 Phase 2 予定機能

Phase 2（計画中）では以下の機能を追加予定:

- [ ] いいね自動実行
- [ ] フォロー/アンフォロー自動実行
- [ ] エンゲージメント詳細分析
- [ ] 複数アカウント管理
- [ ] カスタムプロンプト設定
- [ ] 投稿テンプレート
- [ ] A/Bテスト機能

---

## 📖 関連ドキュメント

- [README.md](../README.md) - プロジェクト概要
- [QSTASH_SETUP.md](QSTASH_SETUP.md) - QStashセットアップガイド
- [scripts/README.md](../scripts/README.md) - デモデータセットアップ

---

**最終更新日**: 2025年11月24日
**Phase**: Phase 1 MVP
**ステータス**: ✅ 本番運用中
