# Xフォロワーメーカー - 要件定義書

## 要件定義の作成原則
- **「あったらいいな」は絶対に作らない**
- **拡張可能性のための余分な要素は一切追加しない**
- **将来の「もしかして」のための準備は禁止**
- **今、ここで必要な最小限の要素のみ**

---

## 1. プロジェクト概要

### 1.1 成果目標
AIがユーザーの興味関心に基づいて投稿を自動生成・投稿し、Xでの露出とフォロワー増加を自動化する完全規約遵守型アプリ。

### 1.2 成功指標

#### 定量的指標
1. **フォロワー増加率**: 月間フォロワー増加数が利用前と比較して150%以上
2. **投稿のインプレッション数**: 平均インプレッション数が利用前比200%以上
3. **エンゲージメント率**: いいね・リプライ・リツイート等の合計が利用前比180%以上
4. **アクティブフォロワー比率**: 新規獲得フォロワーの70%以上が実際にツイートしているアカウント

#### 定性的指標
1. **使いやすさ**: 初回セットアップが10分以内で完了し、キーワード設定だけでAIが稼働開始
2. **安心感**: X利用規約に完全準拠し、アカウント凍結リスクを最小化
3. **コストパフォーマンス**: Phase 1（MVP）は完全無料で運用可能
4. **成長実感**: フォロワー増加推移がダッシュボードで視覚的に確認できる

---

## 2. システム全体像

### 2.1 主要機能一覧（Phase 1 MVP）

**Phase 1で実装する機能:**
- **初回オンボーディング**: 3ステップ・3分で完了するセットアップ体験
- **AI自動投稿**: ユーザーの興味関心に基づいたツイートをAIが生成・自動投稿
- **投稿スケジューリング**: 最適な時間帯に自動投稿
- **投稿プレビュー・編集**: AIが生成した投稿を事前確認・編集可能、リアルタイムプレビュー
- **フォロワー分析**: フォロワー数推移をグラフで可視化、カウントアップアニメーション付き
- **X OAuth連携**: 安全なTwitterアカウント連携
- **リアルタイム更新**: エンゲージメント数の自動更新（5秒間隔）
- **マイクロインタラクション**: ボタン、カード、アニメーション等のUI演出

**Phase 2で追加予定の機能（需要確認後）:**
- ターゲットユーザー発見
- いいね・フォロー提案（半自動）
- エンゲージメント詳細分析

### 2.2 ユーザーロールと権限

**シンプルな権限設計（MVPのため）:**
- **一般ユーザー**: 全機能にアクセス可能
- **管理者**: なし（Phase 1では不要）

### 2.3 認証・認可要件

**認証方式:**
- NextAuth.js + Twitter OAuth 2.0 PKCE
- メール + パスワード（オプション）

**セキュリティレベル:**
- 個人情報（メールアドレス、Twitter認証トークン）の暗号化保存
- HTTPS通信必須
- X API トークンのAES-256-GCM暗号化

**管理機能:**
- Phase 1では不要

---

## 3. ページ詳細仕様

### 3.1 P-001: ダッシュボード

#### 目的
X連携、AI投稿設定、フォロワー増加を一元管理し、ユーザーが成長を実感できるホーム画面

#### 主要機能

**コア機能:**
- X（Twitter）アカウント連携ボタン
- 興味関心キーワード設定（プリセット選択肢 + カスタム入力）
- 投稿頻度設定（スライダーUI：1日3-5回）
- 投稿時間帯設定（例：9時、12時、18時、21時）
- フォロワー数推移グラフ（過去30日、大きく表示）
- 今日の投稿予定リスト
- 最近の投稿履歴（直近10件、エンゲージメント数表示）
- X連携ステータス表示（接続中/未接続/エラー）

**UI/UX強化機能:**
- 初回オンボーディング（3ステップウィザード）
  - Step 1: X連携（30秒）
  - Step 2: 興味設定（1分、プリセット選択）
  - Step 3: 投稿頻度設定（30秒、スライダー）
- フォロワー数のカウントアップアニメーション
- グラフの描画アニメーション（左から右へスライド）
- 次の投稿までのカウントダウンタイマー
- クイックアクションボタン（投稿確認、設定変更）
- リアルタイム更新（React Query、5秒間隔）
- マイクロインタラクション（ホバー、クリック時の演出）

#### 必要な操作

| 操作種別 | 操作内容 | 必要な入力 | 期待される出力 |
|---------|---------|-----------|---------------|
| 取得 | ダッシュボードデータ取得 | ユーザーID | フォロワー数、投稿履歴、設定情報 |
| 作成 | X連携開始 | OAuth認証フロー | アクセストークン、ユーザー情報 |
| 更新 | キーワード設定更新 | キーワードリスト | 更新成功メッセージ |
| 更新 | 投稿スケジュール更新 | 頻度、時間帯 | 更新成功メッセージ |
| 削除 | X連携解除 | ユーザーID | トークン削除、解除完了メッセージ |

#### 処理フロー

**初回セットアップフロー（3ステップ・3分完了）:**

**Step 1: X連携（30秒）**
1. ウェルカム画面「Xフォロワーメーカーへようこそ」
2. 「Xアカウントと連携」ボタンをクリック
3. Twitter OAuth 2.0認証画面へリダイレクト
4. ユーザーが認証を許可
5. アクセストークンを取得・暗号化保存
6. Step 2へ遷移（スライドアニメーション）

**Step 2: 興味設定（1分）**
1. 「あなたの興味は？」画面を表示
2. プリセット選択肢を表示:
   - ビジネス・起業
   - プログラミング・技術
   - デザイン・クリエイティブ
   - マーケティング・SNS
   - 筋トレ・健康
   - 投資・副業
   - カスタム入力（高度な設定）
3. ユーザーが最大3つ選択（クリックで✓アニメーション）
4. 「次へ」ボタンでStep 3へ遷移

**Step 3: 投稿頻度設定（30秒）**
1. 「1日何回投稿する？」画面を表示
2. スライダーUI表示: 3回 | 4回★ | 5回
3. プレビュー表示「1日4回 → 月120投稿」
4. 「完了」ボタンをクリック
5. AIが初回投稿を生成開始（ローディング3秒）
6. 「✅ 準備完了！」メッセージ表示
7. ダッシュボードにリダイレクト（フェードアニメーション）

**日常利用フロー:**
1. ユーザーがダッシュボードにアクセス
2. システムが最新のフォロワー数を取得（バックグラウンド）
3. グラフを描画アニメーション（左から右へ）
4. フォロワー数がカウントアップ表示（1,234 → 1,456）
5. 今日の投稿予定と投稿済みツイートを表示
6. エンゲージメント数がリアルタイム更新（5秒間隔）
7. ユーザーが「投稿を確認・編集」ボタンをクリック
8. P-002（投稿プレビュー画面）へ遷移（スライド）

#### データ構造（概念）

```yaml
User:
  識別子: user_id（UUID）
  基本情報:
    - email（必須）
    - password_hash（必須）
    - twitter_user_id（任意、OAuth連携後に設定）
    - twitter_username（任意）
  設定情報:
    - keywords（配列、例：["プログラミング", "AI"]）
    - post_frequency（数値、1日の投稿回数：3-5）
    - post_times（配列、例：["09:00", "12:00", "18:00", "21:00"]）
  トークン:
    - twitter_access_token_encrypted（暗号化）
    - twitter_refresh_token_encrypted（暗号化）
  メタ情報:
    - created_at
    - updated_at
  関連:
    - Posts（1対多）
    - FollowerStats（1対多）
```

```yaml
FollowerStats:
  識別子: stat_id（UUID）
  基本情報:
    - user_id（外部キー、必須）
    - follower_count（数値、必須）
    - following_count（数値、任意）
    - recorded_at（タイムスタンプ、必須）
  メタ情報:
    - created_at
  関連:
    - User（多対1）
```

---

### 3.2 P-002: AI投稿プレビュー・編集

#### 目的
AIが生成した投稿をユーザーが確認・編集・承認し、質の高い投稿を担保する

#### 主要機能

**コア機能:**
- AIが生成した投稿の一覧（今日〜今後7日分）
- 投稿のプレビュー表示（Xのツイート風デザイン）
- 投稿内容の編集機能（テキストエディタ、リアルタイムプレビュー）
- 投稿の削除ボタン
- 投稿の再生成ボタン（AIに再度生成させる）
- 投稿の承認・非承認切り替え
- 手動投稿の追加機能
- 投稿ステータス表示（予約中/投稿済み/エラー/非承認）
- 投稿日時の変更機能
- エンゲージメント数の表示（いいね、リプライ、リツイート）

**UI/UX強化機能:**
- 日付ごとの折りたたみ表示（「今日」「明日」「今週」）
- 再生成時のローディングアニメーション（「AIが考え中...」）
- 投稿内容のフェードイン/フェードアウト切り替え
- リアルタイム文字数カウンター（234/280 + 「残り XX文字」表示）
- ハッシュタグ・@メンションの自動ハイライト
- 投稿成功時の紙吹雪アニメーション
- エンゲージメント数のリアルタイム更新（5秒間隔、ラベル付き「いいね」「リポスト」「返信」）
- 編集モーダルのスムーズな開閉（スライド+フェード）
- ツイート風プレビュー（右側に常時表示、使い方ヒント付き）
- ステータスバッジに説明テキスト追加（例：「予約中 - 自動で投稿されます」）
- すべてのボタンに明確な日本語ラベル（「編集する」「AIで再生成」等）
- グラデーション背景と立体的なシャドウによる視覚的階層

#### 必要な操作

| 操作種別 | 操作内容 | 必要な入力 | 期待される出力 |
|---------|---------|-----------|---------------|
| 取得 | 投稿一覧取得 | ユーザーID、期間 | 投稿リスト |
| 作成 | 手動投稿追加 | 投稿内容、投稿日時 | 新規投稿ID |
| 作成 | 投稿再生成 | post_id、キーワード | 新しい投稿内容 |
| 更新 | 投稿内容編集 | post_id、新しい内容 | 更新成功メッセージ |
| 更新 | 投稿承認状態変更 | post_id、approved（true/false） | 更新成功メッセージ |
| 更新 | 投稿日時変更 | post_id、新しい日時 | 更新成功メッセージ |
| 削除 | 投稿削除 | post_id | 削除成功メッセージ |

#### 処理フロー

**投稿確認フロー:**
1. ユーザーが投稿プレビュー画面にアクセス
2. システムが今後7日分の投稿を取得
3. 投稿一覧を日付順に表示
4. ユーザーが投稿をクリックして詳細表示
5. 編集が必要な場合、テキストエディタで修正
6. 「保存」ボタンで更新を確定
7. 投稿一覧に戻る

**投稿再生成フロー（AI演出）:**
1. ユーザーが気に入らない投稿の「🔄 AIで再生成」ボタンをクリック
2. ボタンが無効化され「AIが考え中...」ローディング表示（パルスアニメーション）
3. システムがGemini APIに再度リクエスト（2-3秒）
4. 既存の投稿内容がフェードアウト
5. 新しい投稿内容が生成される
6. 新しい内容がフェードインで表示
7. 「✨ 新しい投稿を生成しました」通知（1秒で消える）
8. プレビュー表示を更新

**手動投稿追加フロー:**
1. ユーザーが「手動投稿追加」ボタンをクリック
2. 投稿フォームが表示される
3. ユーザーがツイート内容と投稿日時を入力
4. 「追加」ボタンで保存
5. 投稿一覧に追加される

#### データ構造（概念）

```yaml
Post:
  識別子: post_id（UUID）
  基本情報:
    - user_id（外部キー、必須）
    - content（テキスト、必須、280文字以内）
    - scheduled_at（タイムスタンプ、必須）
    - is_approved（真偽値、デフォルト: true）
    - is_manual（真偽値、デフォルト: false）
  ステータス:
    - status（列挙型: scheduled, posted, failed, cancelled）
    - posted_at（タイムスタンプ、任意）
    - error_message（テキスト、任意）
    - twitter_tweet_id（文字列、任意、投稿成功後に設定）
  メタ情報:
    - created_at
    - updated_at
  関連:
    - User（多対1）
```

---

## 4. データ設計概要

### 4.1 主要エンティティ

```yaml
User:
  概要: アプリケーションのユーザー、Xアカウントと連携
  主要属性:
    - 認証情報: email, password_hash
    - X連携: twitter_user_id, twitter_username, tokens
    - 設定: keywords, post_frequency, post_times
  関連:
    - Posts（1対多）
    - FollowerStats（1対多）

Post:
  概要: AIまたは手動で作成された投稿
  主要属性:
    - 投稿内容: content, scheduled_at, is_approved
    - ステータス: status, posted_at, error_message
    - X連携: twitter_tweet_id
  関連:
    - User（多対1）

FollowerStats:
  概要: フォロワー数の履歴データ（グラフ表示用）
  主要属性:
    - 統計データ: follower_count, following_count
    - 記録日時: recorded_at
  関連:
    - User（多対1）
```

### 4.2 エンティティ関係図

```
User ─┬─ Post              （1対多）
      └─ FollowerStats     （1対多）
```

### 4.3 バリデーションルール

```yaml
email:
  - ルール: 有効なメール形式、255文字以内
  - 理由: アカウント識別とログイン用

password:
  - ルール: 8文字以上、英数字混在
  - 理由: セキュリティ確保のため

keywords:
  - ルール: 1-10個、各キーワード50文字以内
  - 理由: AI投稿生成の精度とパフォーマンス

post_frequency:
  - ルール: 1-5の整数
  - 理由: X API Free Tierの1,500ツイート/月制限（1日50ツイートまで）

content:
  - ルール: 1-280文字（日本語含む）
  - 理由: Xのツイート文字数制限

scheduled_at:
  - ルール: 現在時刻以降の日時
  - 理由: 過去の日時には投稿できない
```

---

## 5. 制約事項

### 外部API制限

**X API Free Tier:**
- **月間投稿制限**: 1,500ツイート/月（アプリケーションレベル）
- **読み取り機能**: なし（検索、いいね、フォロー機能は使用不可）
- **影響**: Phase 1では投稿のみ実装、ターゲット発見機能は実装不可

**Google Gemini API Free Tier:**
- **リクエスト制限**: 1,500リクエスト/日、15リクエスト/分
- **影響**: 1,500ユーザー × 1投稿/日まで無料枠で対応可能

**Upstash QStash Free Tier:**
- **リクエスト制限**: 25,000リクエスト/月
- **影響**: 毎時実行（720リクエスト/月）で十分、制約なし

**Neon PostgreSQL Free Tier:**
- **ストレージ制限**: 0.5GB
- **稼働時間**: 191.9時間/月
- **影響**: 100ユーザー程度まで対応可能

### 技術的制約

**Vercel Serverless Functions:**
- **実行時間制限**: 10秒（Hobby Plan）
- **影響**: 長時間処理は分割実行が必要

**投稿生成速度:**
- **Gemini API応答時間**: 平均1-3秒/リクエスト
- **影響**: 複数投稿の一括生成時、順次処理が必要

**文字数制限:**
- **Xツイート**: 280文字（英数字・日本語含む）
- **影響**: AI生成時に280文字以内に制約

---

## 5.1 セキュリティ要件

### 認証エンドポイントの保護

**アカウントベースロックアウト（必須）**:
- **失敗回数**: 5回の連続失敗でアカウントロック
- **ロック期間**: 15分間
- **段階的遅延**:
  - 1回目の失敗: 0秒
  - 2回目の失敗: 2秒
  - 3回目の失敗: 5秒
  - 4回目の失敗: 10秒
  - 5回目の失敗: アカウントロック（15分）

**IPベースレート制限（オプション、Phase 2で検討）**:
- **本番環境**: 10リクエスト/分（同一IPから認証エンドポイントへ）
- **テスト環境**: 制限なし（E2Eテスト対応）

**実装技術:**
- アカウントロックアウト: データベースに失敗回数と最終失敗時刻を記録
- 環境変数: `ACCOUNT_LOCKOUT_ENABLED`（テスト時は無効化可能）

**MVP判定:**
- Phase 1では基本的な認証のみ実装
- アカウントロックアウトはPhase 2で追加

### Twitter APIトークンの保護

**暗号化方式:**
- AES-256-GCM（認証タグ付き暗号化）
- 環境変数による暗号化キー管理（`ENCRYPTION_KEY`）

**保存方法:**
```yaml
# データベース保存形式
twitter_access_token_encrypted: "iv:authTag:encryptedData"の形式
twitter_refresh_token_encrypted: 同上
```

**復号化:**
- API呼び出し時のみメモリ上で復号化
- 復号化後、即座にメモリから削除

### 運用要件：可用性とヘルスチェック

#### ヘルスチェックエンドポイント
- **エンドポイント**: `/api/health`
- **目的**: Vercel/Cloud Runでのliveness/readinessプローブ
- **要件**:
  - データベース接続確認（`SELECT 1`）
  - HTTP 200（正常）/ 503（異常）でステータス応答
  - 認証不要（パブリックエンドポイント）
  - 5秒以内の応答時間
- **レスポンス例**:
  ```json
  {
    "status": "healthy",
    "database": "connected",
    "timestamp": "2025-11-21T12:00:00Z"
  }
  ```

#### グレースフルシャットダウン
- **目的**: デプロイ時のリクエストドロップ防止
- **要件**:
  - SIGTERMシグナルハンドラーの実装
  - シャットダウン中の新規リクエスト拒否（HTTP 503）
  - 進行中のリクエスト完了まで待機
  - データベース接続の安全なクローズ
  - タイムアウト: 8秒

**MVP判定**:
- ヘルスチェック: **Phase 1で必須**
- グレースフルシャットダウン: **Phase 1で必須**

---

## 6. 複合API処理（バックエンド内部処理）

### 複合処理-001: AI投稿生成・スケジューリング

**トリガー**: ユーザーがキーワード設定を保存した時点、または定期実行（毎日0時）

**フロントエンドAPI**: POST /api/posts/generate

**バックエンド内部処理**:
1. ユーザーの設定（keywords, post_frequency, post_times）を取得
2. Gemini APIに投稿生成リクエスト
   - プロンプト: 「{keywords}に関する有益なツイートを{post_frequency}件生成してください。各ツイートは280文字以内、日本語で自然な表現にしてください。」
3. AI応答から投稿内容を抽出
4. 各投稿に対してscheduled_atを計算（post_timesに基づく）
5. データベースにPost レコードを作成（status: scheduled）
6. 成功/失敗をフロントエンドに返却

**結果**: 生成された投稿件数とプレビューリンク

**外部サービス依存**: Google Gemini API

---

### 複合処理-002: 定期投稿実行

**トリガー**: Upstash QStashによる定期実行（毎時0分）

**フロントエンドAPI**: なし（バックグラウンド処理）

**バックエンド内部処理**:
1. 現在時刻から±5分以内にscheduled_atが設定されているPostを取得
2. 該当するPostのuser_idからTwitterトークンを復号化
3. 各投稿に対してTwitter API v2でツイート実行
   - エンドポイント: POST /2/tweets
   - ペイロード: {"text": post.content}
4. 成功時: statusをpostedに更新、twitter_tweet_idを保存
5. 失敗時: statusをfailedに更新、error_messageを保存
6. エラー時は最大3回リトライ（指数バックオフ: 1秒、2秒、4秒）
7. 処理結果をログに記録

**結果**: 投稿成功/失敗の記録

**外部サービス依存**: X API v2, Upstash QStash

---

### 複合処理-003: フォロワー数取得・記録

**トリガー**: Upstash QStashによる定期実行（毎日8時）

**フロントエンドAPI**: なし（バックグラウンド処理）

**バックエンド内部処理**:
1. 全ユーザーのリストを取得
2. 各ユーザーのTwitterトークンを復号化
3. Twitter API v2でユーザー情報を取得
   - エンドポイント: GET /2/users/me
   - 取得データ: followers_count, following_count
4. FollowerStatsテーブルに新規レコード作成
5. エラー時はスキップして次のユーザーへ
6. 処理結果をログに記録

**結果**: フォロワー数の履歴データ蓄積

**外部サービス依存**: X API v2, Upstash QStash

---

## 7. 技術スタック

### フロントエンド
```yaml
フレームワーク: React 18（Blue Lamp標準）
言語: TypeScript 5
UIライブラリ: MUI v6
状態管理: Zustand
ルーティング: React Router v6
データフェッチ: React Query
ビルドツール: Vite 5
グラフ表示: Recharts
```

### バックエンド
```yaml
フレームワーク: Next.js 14 App Router
言語: TypeScript 5
API: Next.js API Routes（Serverless Functions）
ORM: Drizzle ORM
認証: NextAuth.js
Twitter API統合: twitter-api-v2
```

### AI API
```yaml
プロバイダー: Google Gemini
モデル: Gemini 2.0 Flash
用途: ツイート自動生成
無料枠: 1,500リクエスト/日
```

### データベース
```yaml
DB: PostgreSQL
ホスティング: Neon（https://neon.tech）
無料枠: 0.5GB / 191.9時間/月
```

### 定期実行（Cron）
```yaml
サービス: Upstash QStash
無料枠: 25,000リクエスト/月
```

### インフラ
```yaml
ホスティング: Vercel Hobby Plan（無料）
ドメイン: 任意（$10-15/年）
```

---

## 8. 必要な外部サービス・アカウント

### 必須サービス

| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| X Developer Account | ツイート自動投稿、OAuth認証 | https://developer.twitter.com/ | Free Tier、申請2営業日 |
| Google AI Studio | AI投稿生成 | https://ai.google.dev/ | 無料、即時取得可能 |
| Neon PostgreSQL | データベース | https://neon.tech/ | 無料、即時取得可能 |
| Upstash QStash | 定期実行 | https://upstash.com/ | 無料、即時取得可能 |
| Vercel | ホスティング | https://vercel.com/ | 無料、即時取得可能 |

### オプションサービス

| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| カスタムドメイン | ブランディング | 各種レジストラ | $10-15/年 |

---

## 9. 今後の拡張予定（Phase 2）

**原則**: 拡張予定があっても、Phase 1では必要最小限の実装のみを行う

- 「あったらいいな」は実装しない
- 拡張可能性のための余分な要素は追加しない
- 将来の「もしかして」のための準備は禁止
- 今、ここで必要な最小限の要素のみを実装

拡張が必要になった時点で、Phase 11: 機能拡張オーケストレーターを使用して追加実装を行います。

### Phase 2で追加予定の機能

**前提条件:**
- Phase 1で30人以上のアクティブユーザー獲得
- ユーザーから「ターゲット発見機能がほしい」という要望
- X API Basic Tier（$200/月）への投資判断

**追加機能:**
1. **ターゲットユーザー発見**
   - キーワード検索によるツイート取得
   - ターゲットユーザーの自動抽出
   - フォロワー属性分析

2. **いいね・フォロー提案（半自動）**
   - AIが「いいねすべきツイート」を提案
   - AIが「フォローすべきユーザー」を提案
   - ユーザーがワンクリックで一括実行
   - X利用規約完全遵守（自動化ではなく「提案」）

3. **エンゲージメント詳細分析**
   - ツイートごとのいいね・リツイート数
   - 最適な投稿時間の分析
   - フォロワー属性の詳細分析

4. **有料プラン**
   - Free: Phase 1機能のみ
   - Premium（月額980円）: Phase 2機能すべて

---

## 10. 段階的開発戦略

### Phase 1: MVP（0-3ヶ月）

**目標**: アイデア検証、初期ユーザー獲得

**実装範囲:**
- P-001: ダッシュボード
- P-002: AI投稿プレビュー・編集
- X OAuth連携
- AI自動投稿（1日3-5回）
- フォロワー数推移グラフ

**コスト**: $0/月（完全無料）

**成功基準:**
- 30人以上のアクティブユーザー獲得
- 平均フォロワー増加率 120%以上
- ユーザー満足度 4.0/5.0以上

---

### Phase 2: スケール（3-6ヶ月）

**前提条件:**
- Phase 1の成功基準達成
- ユーザーから機能追加要望
- 30人以上が月額500-1,000円の支払い意思表明

**実装範囲:**
- X API Basic Tierへ移行（$200/月）
- ターゲット発見機能
- いいね・フォロー提案機能
- エンゲージメント詳細分析
- 有料プラン導入

**コスト**: $250/月

**収益**: 30人 × $10/月 = $300/月

**利益**: $50/月（黒字化）

---

### Phase 3以降: 拡張（6ヶ月以降）

**検討項目:**
- 画像付き投稿対応
- スレッド投稿機能
- 複数アカウント管理
- チーム機能
- ホワイトラベル提供

**判断基準:**
- Phase 2で100人以上のアクティブユーザー
- 月間収益 $1,000以上
- 継続率 80%以上

---

## 11. プロジェクトの価値とリスク

### 市場価値

**Phase 1（MVP）**: 5万円〜10万円
**Phase 2（完全版）**: 30万円〜50万円

**根拠:**
- 類似サービス（SocialDog、Buffer）は月額$15-30で提供
- AIによる自動化が差別化要因
- X利用規約完全遵守により長期運用可能

### 競合優位性

1. **AI自動生成**: Gemini 2.0 Flashによる高品質な日本語投稿
2. **完全規約遵守**: アカウント凍結リスク最小化
3. **低コスト**: Phase 1完全無料、Phase 2も月額980円
4. **シンプルさ**: 2ページで完結、初回セットアップ10分以内

### リスクと対策

| リスク | 影響度 | 対策 |
|--------|--------|------|
| X API仕様変更 | 高 | API変更監視、抽象化レイヤー実装 |
| X API料金値上げ | 高 | Phase 1で需要検証、投資判断 |
| Gemini API制限 | 中 | 無料枠で375ユーザー対応可能、超過後も低コスト |
| 競合サービス出現 | 中 | AI品質とUXで差別化 |
| ユーザー獲得難航 | 中 | Phase 1無料提供で低リスク検証 |

---

## 12. 開発スケジュール（Phase 1）

### Week 1-2: 基盤構築
- Next.js 14プロジェクト初期化
- Neon PostgreSQL接続設定
- NextAuth.js認証実装
- Twitter OAuth 2.0統合

### Week 3-4: コア機能開発
- Gemini API統合（投稿生成）
- Twitter API統合（ツイート投稿）
- Upstash QStash統合（定期実行）
- データベーススキーマ実装

### Week 5-6: UI/UX開発
- P-001: ダッシュボード画面
- P-002: 投稿プレビュー・編集画面
- レスポンシブデザイン対応

### Week 7: テスト・最適化
- 単体テスト作成
- E2Eテスト実装
- パフォーマンス最適化

### Week 8: デプロイ・監視
- Vercel本番デプロイ
- エラー監視設定
- ドキュメント整備
- ベータユーザー招待

**合計開発期間: 6-8週間**

---

## 13. UI/UXデザインガイドライン

### 13.1 デザインコンセプト

**コアコンセプト**: 「シンプルで使いやすい」×「AIの凄さが伝わる」

**ユーザーが最初に感じるべきこと:**
1. 「これ、すごい！AIが全部やってくれるんだ」
2. 「めっちゃ簡単じゃん、3分で始められる」
3. 「フォロワー増えてる！効果出てる！」

### 13.2 カラーパレット

```yaml
Primary: #1DA1F2（Xブルー）
  用途: メインアクション、リンク、選択状態

Success: #10B981（緑）
  用途: 成功メッセージ、増加表示、完了状態

Warning: #F59E0B（オレンジ）
  用途: 注意喚起、警告メッセージ

Error: #EF4444（赤）
  用途: エラーメッセージ、削除ボタン

Neutral: #6B7280（グレー）
  用途: 通常テキスト、セカンダリ要素

Background: #F9FAFB（薄いグレー）
  用途: ページ背景、カードの背景

White: #FFFFFF
  用途: カード、モーダル、ボタン背景
```

### 13.3 タイポグラフィ

```yaml
フォントファミリー:
  見出し: Inter（太字）/ Noto Sans JP（日本語）
  本文: Inter（通常）/ Noto Sans JP（日本語）
  数値: SF Mono（等幅）- 数字のカッコよさ重視

フォントサイズ:
  h1: 32px（ページタイトル）
  h2: 24px（セクション見出し）
  h3: 20px（カード見出し）
  body: 16px（本文）
  small: 14px（補足テキスト）
  caption: 12px（キャプション）

フォントウェイト:
  bold: 700（見出し、強調）
  semibold: 600（サブ見出し）
  medium: 500（ボタンテキスト）
  regular: 400（本文）
```

### 13.4 スペーシング・レイアウト

```yaml
スペーシングシステム（8の倍数）:
  xs: 4px
  sm: 8px
  md: 16px
  lg: 24px
  xl: 32px
  2xl: 48px
  3xl: 64px

カード:
  角丸: 12px
  影: 0 1px 3px rgba(0,0,0,0.1)
  padding: 24px

ボタン:
  角丸: 8px
  高さ: 44px（タップしやすい）
  padding: 12px 24px

コンテナ:
  最大幅: 1200px
  サイドマージン: 24px（モバイル）、48px（デスクトップ）
```

### 13.5 アイコン

```yaml
ライブラリ: Lucide Icons
  理由: シンプル、モダン、カスタマイズ可能

サイズ:
  小: 16px（インラインアイコン）
  中: 24px（標準）
  大: 32px（メインアクション）

色:
  デフォルト: currentColor（テキスト色を継承）
  アクセント: Primary色（重要なアクション）
```

### 13.6 アニメーション仕様

**ライブラリ**: Framer Motion

**アニメーション原則:**
- 速度: 0.2-0.4秒（速すぎず遅すぎず）
- イージング: ease-out（自然な減速）
- 過度な装飾は避ける（シンプルさを維持）

**主要アニメーションパターン:**

```yaml
ページ遷移:
  type: スライド + フェード
  duration: 0.3秒
  direction: 左→右（進む）、右→左（戻る）

要素出現:
  type: 下から上にスライドイン + フェード
  duration: 0.4秒
  stagger: 0.1秒（複数要素の場合）

数値変化:
  type: カウントアップ
  duration: 1.5秒
  例: 1,234 → 1,456

ローディング:
  type: パルス + 回転
  duration: 無限ループ
  opacity: 0.5 ↔ 1.0

成功アクション:
  type: バウンス + フェードイン
  duration: 0.5秒
  例: ✓アイコンが弾む

ホバー:
  type: 上に浮く + 影を濃くする
  duration: 0.2秒
  transform: translateY(-2px)

クリック:
  type: 押し込む
  duration: 0.1秒
  transform: scale(0.98)
```

### 13.7 主要コンポーネント仕様

#### ボタン

```yaml
Primary（メインアクション）:
  背景: #1DA1F2
  テキスト: #FFFFFF
  ホバー: 背景を10%暗くする
  無効: 背景 #E5E7EB、テキスト #9CA3AF

Secondary（サブアクション）:
  背景: #FFFFFF
  テキスト: #1DA1F2
  ボーダー: 1px solid #1DA1F2
  ホバー: 背景 #F0F9FF

Danger（削除等）:
  背景: #EF4444
  テキスト: #FFFFFF
  ホバー: 背景を10%暗くする
```

#### カード

```yaml
標準カード:
  背景: #FFFFFF
  角丸: 12px
  影: 0 1px 3px rgba(0,0,0,0.1)
  padding: 24px
  ホバー: 影を濃くする（0 4px 6px）

インタラクティブカード（クリック可能）:
  標準カードに加えて
  cursor: pointer
  ホバー: translateY(-2px) + 影を濃くする
```

#### グラフ（Recharts）

```yaml
折れ線グラフ:
  線色: #1DA1F2（Primary）
  線幅: 2px
  グラデーション: #1DA1F2 → transparent
  アニメーション: 左から右へ描画（1.5秒）

ツールチップ:
  背景: #FFFFFF
  影: 0 2px 8px rgba(0,0,0,0.15)
  角丸: 8px
  padding: 12px
```

### 13.8 レスポンシブデザイン

```yaml
ブレークポイント:
  mobile: 〜640px
  tablet: 641px〜1024px
  desktop: 1025px〜

レイアウト調整:
  mobile:
    - 1カラム
    - グラフは全幅
    - 余白 16px
    - フォントサイズ 14px（本文）

  tablet:
    - 2カラム（可能な箇所）
    - グラフは全幅または半幅
    - 余白 24px

  desktop:
    - 2〜3カラム
    - グラフは画面の40-50%
    - 余白 48px
    - フォントサイズ 16px（本文）
```

### 13.9 マイクロインタラクション実装箇所

```yaml
必須実装:
  1. フォロワー数カウントアップ（ダッシュボード）
  2. グラフ描画アニメーション（ダッシュボード）
  3. 投稿再生成ローディング（投稿プレビュー）
  4. 投稿成功時の紙吹雪（投稿プレビュー）
  5. ボタンホバー・クリック演出（全体）
  6. カード要素の浮き上がり（全体）
  7. オンボーディングステップ遷移（初回）
  8. 完了時の✓アニメーション（全体）

推奨実装:
  9. スケルトンローディング（データ取得中）
  10. トースト通知のスライドイン（通知）
  11. モーダル開閉のフェード+スケール（モーダル）
```

### 13.10 アクセシビリティ要件

```yaml
必須対応:
  - キーボード操作対応（Tab、Enter、Escキー）
  - フォーカス表示（outline: 2px solid #1DA1F2）
  - ARIA属性の適切な設定
  - 色だけでなくアイコン・テキストでも情報伝達
  - コントラスト比 4.5:1以上（WCAG AA準拠）

推奨対応:
  - スクリーンリーダー対応（alt属性、role属性）
  - エラーメッセージの読み上げ
```

---

**文書作成日**: 2025年11月21日
**最終更新日**: 2025年11月21日
**バージョン**: 1.1（Phase 1 MVP + UI/UX強化版）
