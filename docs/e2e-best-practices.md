# E2Eテストベストプラクティス

**プロジェクト名**: Xフォロワーメーカー
**作成日時**: 2025-11-24 09:33
**目的**: 成功パターンの蓄積により後続テストの試行錯誤を削減

---

## 成功パターン集

このファイルは、E2Eテストで成功した方法を自動的に蓄積します。
後続のテストは、ここに記録された知見を活用して効率的に実装できます。

---

## 1. サーバー起動

### 成功パターン
（後続テストで自動蓄積されます）

---

## 2. ページアクセス

### 成功パターン
（後続テストで自動蓄積されます）

---

## 3. 認証処理

### 成功パターン
（後続テストで自動蓄積されます）

---

## 4. UI操作

### キーワードボタンのセレクタパターン - Pass日時: 2025-11-24 10:15

**テストID**: E2E-DASH-014
**問題**: セレクタ `button:has-text("ビジネス・起業")` がキーワードボタンを検出できない。ボタン内のテキストがgeneric要素にネストされており、`:has-text()` セレクタが正しく動作しない。
**成功パターン**:
```typescript
// キーワードボタンのセレクタは getByRole を使用
const keywords = ['ビジネス・起業', 'プログラミング・技術'];
for (const kw of keywords) {
  await expect(page.getByRole('button', { name: kw })).toBeVisible();
}
```

**重要なポイント**:
- `button:has-text()` は複雑なDOM構造（ネストされた要素内のテキスト）に対応できない場合がある
- `getByRole('button', { name: '...' })` はアクセシビリティに基づいたセレクタで、より堅牢
- ボタン内のテキストがgeneric要素やspan要素にネストされている場合でも正しく動作する

**失敗したパターン（参考）**:
- ❌ `page.locator(\`button:has-text("${kw}")\`)` - generic要素内のテキストを検出できない
- ❌ `page.locator('button', { hasText: kw })` - 同様の理由で失敗

---

---

## 5. その他のベストプラクティス

### 成功パターン
（後続テストで自動蓄積されます）

---

**最終更新日**: 2025-11-24 10:15
