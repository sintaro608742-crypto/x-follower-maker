# AIæŠ•ç¨¿ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ç·¨é›†ãƒšãƒ¼ã‚¸ APIä»•æ§˜æ›¸

ç”Ÿæˆæ—¥: 2025-11-21
åé›†å…ƒ: frontend/src/services/mock/PostsService.ts
@MOCK_TO_APIãƒãƒ¼ã‚¯æ•°: 7

## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

### 1. æŠ•ç¨¿ä¸€è¦§å–å¾—
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/posts`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: ãªã—
- **Response**: `Post[]`
- **èª¬æ˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¨æŠ•ç¨¿ã‚’å–å¾—ï¼ˆä»Šæ—¥ã€œä»Šå¾Œ7æ—¥åˆ†ï¼‰

#### Responseä¾‹
```json
[
  {
    "id": "post-1",
    "user_id": "user-1",
    "content": "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ãŒæœ€åˆã«å­¦ã¶ã¹ãã¯ã€Œãƒ‡ãƒãƒƒã‚°åŠ›ã€ã§ã™ğŸ’¡...",
    "scheduled_at": "2025-11-21T09:00:00Z",
    "is_approved": true,
    "is_manual": false,
    "status": "scheduled",
    "created_at": "2025-11-20T10:00:00Z",
    "updated_at": "2025-11-20T10:00:00Z"
  }
]
```

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 2. æŠ•ç¨¿å†…å®¹æ›´æ–°
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `PATCH /api/posts/:id`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: `PostUpdateRequest`
- **Response**: `Post`
- **èª¬æ˜**: æŠ•ç¨¿å†…å®¹ã€æŠ•ç¨¿æ—¥æ™‚ã€æ‰¿èªçŠ¶æ…‹ã‚’æ›´æ–°

#### Request Body
```typescript
{
  post_id: string;          // å¿…é ˆ
  content?: string;         // ä»»æ„ï¼ˆæŠ•ç¨¿å†…å®¹ã®æ›´æ–°ï¼‰
  scheduled_at?: string;    // ä»»æ„ï¼ˆæŠ•ç¨¿æ—¥æ™‚ã®å¤‰æ›´ï¼‰
  is_approved?: boolean;    // ä»»æ„ï¼ˆæ‰¿èªçŠ¶æ…‹ã®å¤‰æ›´ï¼‰
}
```

#### Requestä¾‹
```json
{
  "post_id": "post-1",
  "content": "æ›´æ–°å¾Œã®æŠ•ç¨¿å†…å®¹...",
  "scheduled_at": "2025-11-21T10:00:00Z"
}
```

#### Responseä¾‹
```json
{
  "id": "post-1",
  "user_id": "user-1",
  "content": "æ›´æ–°å¾Œã®æŠ•ç¨¿å†…å®¹...",
  "scheduled_at": "2025-11-21T10:00:00Z",
  "is_approved": true,
  "is_manual": false,
  "status": "scheduled",
  "created_at": "2025-11-20T10:00:00Z",
  "updated_at": "2025-11-21T14:30:00Z"
}
```

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- `content`: 1ã€œ280æ–‡å­—ï¼ˆæ—¥æœ¬èªå«ã‚€ï¼‰
- `scheduled_at`: ç¾åœ¨æ™‚åˆ»ä»¥é™ã®ISO8601å½¢å¼ã®æ—¥æ™‚

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **400 Bad Request**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆæ–‡å­—æ•°è¶…éã€ç„¡åŠ¹ãªæ—¥æ™‚ï¼‰
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **404 Not Found**: æŒ‡å®šã•ã‚ŒãŸIDã®æŠ•ç¨¿ãŒå­˜åœ¨ã—ãªã„
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 3. æŠ•ç¨¿å‰Šé™¤
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `DELETE /api/posts/:id`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: ãªã—ï¼ˆãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã¿ï¼‰
- **Response**: `void`ï¼ˆ204 No Contentï¼‰
- **èª¬æ˜**: æŒ‡å®šã•ã‚ŒãŸæŠ•ç¨¿ã‚’å‰Šé™¤

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **404 Not Found**: æŒ‡å®šã•ã‚ŒãŸIDã®æŠ•ç¨¿ãŒå­˜åœ¨ã—ãªã„
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 4. æŠ•ç¨¿å†ç”Ÿæˆï¼ˆAIï¼‰
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/posts/:id/regenerate`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: ãªã—ï¼ˆãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã¿ï¼‰
- **Response**: `Post`
- **èª¬æ˜**: AIã§æŠ•ç¨¿å†…å®¹ã‚’å†ç”Ÿæˆã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯è‡ªå‹•çš„ã«`unapproved`ã«ãªã‚‹

#### Responseä¾‹
```json
{
  "id": "post-1",
  "user_id": "user-1",
  "content": "ã€AIå†ç”Ÿæˆã€‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ãŒæœ€åˆã«å­¦ã¶ã¹ãã¯...",
  "scheduled_at": "2025-11-21T09:00:00Z",
  "is_approved": false,
  "is_manual": false,
  "status": "unapproved",
  "created_at": "2025-11-20T10:00:00Z",
  "updated_at": "2025-11-21T14:35:00Z"
}
```

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨­å®šï¼ˆkeywords, post_frequencyï¼‰ã‚’å–å¾—
2. Google Gemini APIã«æŠ•ç¨¿å†ç”Ÿæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ
3. ç”Ÿæˆã•ã‚ŒãŸå†…å®¹ã§æŠ•ç¨¿ã‚’æ›´æ–°
4. `is_approved`ã‚’`false`ã€`status`ã‚’`unapproved`ã«è¨­å®š
5. æ›´æ–°ã•ã‚ŒãŸæŠ•ç¨¿ã‚’è¿”å´

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **404 Not Found**: æŒ‡å®šã•ã‚ŒãŸIDã®æŠ•ç¨¿ãŒå­˜åœ¨ã—ãªã„
- **429 Too Many Requests**: Gemini APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¶…é
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
- **503 Service Unavailable**: Gemini APIãŒåˆ©ç”¨ä¸å¯

---

### 5. æŠ•ç¨¿æ‰¿èª
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/posts/:id/approve`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: ãªã—ï¼ˆãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã¿ï¼‰
- **Response**: `Post`
- **èª¬æ˜**: éæ‰¿èªï¼ˆunapprovedï¼‰ã®æŠ•ç¨¿ã‚’æ‰¿èªã—ã€äºˆç´„ä¸­ï¼ˆscheduledï¼‰ã«å¤‰æ›´

#### Responseä¾‹
```json
{
  "id": "post-3",
  "user_id": "user-1",
  "content": "TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã‚’ç†è§£ã™ã‚‹ã¨...",
  "scheduled_at": "2025-11-21T18:00:00Z",
  "is_approved": true,
  "is_manual": false,
  "status": "scheduled",
  "created_at": "2025-11-20T12:00:00Z",
  "updated_at": "2025-11-21T14:40:00Z"
}
```

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼
1. `is_approved`ã‚’`true`ã«å¤‰æ›´
2. `status`ã‚’`scheduled`ã«å¤‰æ›´
3. æ›´æ–°ã•ã‚ŒãŸæŠ•ç¨¿ã‚’è¿”å´

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **404 Not Found**: æŒ‡å®šã•ã‚ŒãŸIDã®æŠ•ç¨¿ãŒå­˜åœ¨ã—ãªã„
- **409 Conflict**: ã™ã§ã«æ‰¿èªæ¸ˆã¿ã®æŠ•ç¨¿
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 6. æŠ•ç¨¿å†è©¦è¡Œ
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/posts/:id/retry`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: ãªã—ï¼ˆãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã¿ï¼‰
- **Response**: `Post`
- **èª¬æ˜**: å¤±æ•—ï¼ˆfailedï¼‰ã—ãŸæŠ•ç¨¿ã‚’å†åº¦è©¦è¡Œã€äºˆç´„ä¸­ï¼ˆscheduledï¼‰ã«å¤‰æ›´

#### Responseä¾‹
```json
{
  "id": "post-4",
  "user_id": "user-1",
  "content": "ã‚¯ãƒªãƒ¼ãƒ³ã‚³ãƒ¼ãƒ‰ã®æœ¬è³ªã¯ã€Œèª­ã¿ã‚„ã™ã•ã€ã§ã™...",
  "scheduled_at": "2025-11-21T21:00:00Z",
  "is_approved": true,
  "is_manual": false,
  "status": "scheduled",
  "error_message": null,
  "created_at": "2025-11-20T13:00:00Z",
  "updated_at": "2025-11-21T14:45:00Z"
}
```

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼
1. `status`ã‚’`scheduled`ã«å¤‰æ›´
2. `error_message`ã‚’ã‚¯ãƒªã‚¢
3. æ›´æ–°ã•ã‚ŒãŸæŠ•ç¨¿ã‚’è¿”å´
4. Upstash QStashã§æ¬¡ã®æŠ•ç¨¿æ™‚åˆ»ã«è‡ªå‹•æŠ•ç¨¿ã‚’å†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **404 Not Found**: æŒ‡å®šã•ã‚ŒãŸIDã®æŠ•ç¨¿ãŒå­˜åœ¨ã—ãªã„
- **409 Conflict**: å¤±æ•—çŠ¶æ…‹ã§ã¯ãªã„æŠ•ç¨¿ï¼ˆã™ã§ã«æŠ•ç¨¿æ¸ˆã¿ãªã©ï¼‰
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

### 7. æ‰‹å‹•æŠ•ç¨¿ä½œæˆ
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/posts`
- **èªè¨¼**: å¿…é ˆï¼ˆNextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **Request**: `{ content: string, scheduled_at: string }`
- **Response**: `Post`
- **èª¬æ˜**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§æŠ•ç¨¿ã‚’ä½œæˆï¼ˆAIã§ã¯ãªãè‡ªåˆ†ã§æ›¸ã„ãŸæŠ•ç¨¿ï¼‰

#### Request Body
```json
{
  "content": "æ‰‹å‹•ã§ä½œæˆã—ãŸæŠ•ç¨¿å†…å®¹...",
  "scheduled_at": "2025-11-23T10:00:00Z"
}
```

#### Responseä¾‹
```json
{
  "id": "post-9",
  "user_id": "user-1",
  "content": "æ‰‹å‹•ã§ä½œæˆã—ãŸæŠ•ç¨¿å†…å®¹...",
  "scheduled_at": "2025-11-23T10:00:00Z",
  "is_approved": true,
  "is_manual": true,
  "status": "scheduled",
  "created_at": "2025-11-21T15:00:00Z",
  "updated_at": "2025-11-21T15:00:00Z"
}
```

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- `content`: å¿…é ˆã€1ã€œ280æ–‡å­—ï¼ˆæ—¥æœ¬èªå«ã‚€ï¼‰
- `scheduled_at`: å¿…é ˆã€ç¾åœ¨æ™‚åˆ»ä»¥é™ã®ISO8601å½¢å¼ã®æ—¥æ™‚

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **400 Bad Request**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆæ–‡å­—æ•°è¶…éã€ç„¡åŠ¹ãªæ—¥æ™‚ï¼‰
- **401 Unauthorized**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã€ã¾ãŸã¯ç„¡åŠ¹
- **500 Internal Server Error**: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

## å…±é€šä»•æ§˜

### èªè¨¼
- ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯NextAuth.jsã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå¿…é ˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãªã„å ´åˆã¯401 Unauthorizedã‚’è¿”å´
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰user_idã‚’å–å¾—ã—ã¦ä½¿ç”¨

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼
```
Content-Type: application/json
```

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
    "details": {}
  }
}
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†/ãƒ¦ãƒ¼ã‚¶ãƒ¼
- å†ç”Ÿæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: 10ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†/ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆGemini APIåˆ¶é™ã®ãŸã‚ï¼‰

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### Postï¼ˆæŠ•ç¨¿ï¼‰
```typescript
interface Post {
  id: string;                     // æŠ•ç¨¿IDï¼ˆUUIDï¼‰
  user_id: string;                // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰
  content: string;                // æŠ•ç¨¿å†…å®¹ï¼ˆ280æ–‡å­—ä»¥å†…ï¼‰
  scheduled_at: string;           // æŠ•ç¨¿äºˆå®šæ—¥æ™‚ï¼ˆISO8601ï¼‰
  is_approved: boolean;           // æ‰¿èªçŠ¶æ…‹
  is_manual: boolean;             // æ‰‹å‹•æŠ•ç¨¿ãƒ•ãƒ©ã‚°
  status: PostStatus;             // æŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  posted_at?: string;             // æŠ•ç¨¿å®Œäº†æ—¥æ™‚ï¼ˆä»»æ„ï¼‰
  twitter_tweet_id?: string;      // Xãƒ„ã‚¤ãƒ¼ãƒˆIDï¼ˆä»»æ„ï¼‰
  error_message?: string;         // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»»æ„ï¼‰
  engagement?: EngagementStats;   // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆçµ±è¨ˆï¼ˆä»»æ„ï¼‰
  created_at: string;             // ä½œæˆæ—¥æ™‚
  updated_at: string;             // æ›´æ–°æ—¥æ™‚
}
```

### PostStatusï¼ˆæŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
```typescript
type PostStatus = 'scheduled' | 'posted' | 'failed' | 'unapproved';
```

- **scheduled**: äºˆç´„ä¸­ï¼ˆè‡ªå‹•æŠ•ç¨¿ã•ã‚Œã‚‹ï¼‰
- **posted**: æŠ•ç¨¿æ¸ˆã¿
- **failed**: æŠ•ç¨¿ã‚¨ãƒ©ãƒ¼
- **unapproved**: æ‰¿èªå¾…ã¡ï¼ˆæ‰¿èªã•ã‚Œã‚‹ã¾ã§æŠ•ç¨¿ã•ã‚Œãªã„ï¼‰

### EngagementStatsï¼ˆã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆçµ±è¨ˆï¼‰
```typescript
interface EngagementStats {
  likes: number;       // ã„ã„ã­æ•°
  retweets: number;    // ãƒªãƒã‚¹ãƒˆæ•°
  replies: number;     // è¿”ä¿¡æ•°
}
```

### PostUpdateRequestï¼ˆæŠ•ç¨¿æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
```typescript
interface PostUpdateRequest {
  post_id: string;          // å¿…é ˆ
  content?: string;         // ä»»æ„
  scheduled_at?: string;    // ä»»æ„
  is_approved?: boolean;    // ä»»æ„
}
```

---

## ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹å‚ç…§
```typescript
// å®Ÿè£…æ™‚ã¯ã“ã®ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã®æŒ™å‹•ã‚’å‚è€ƒã«ã™ã‚‹
frontend/src/services/mock/PostsService.ts
```

---

## å®Ÿè£…æ™‚ã®æ³¨æ„äº‹é …

### 1. ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
- æŠ•ç¨¿ã®æ›´æ–°ãƒ»å‰Šé™¤ã¯å¿…ãšãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§å®Ÿè¡Œ
- è¤‡æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®æ›¸ãè¾¼ã¿ãŒã‚ã‚‹å ´åˆã¯ç‰¹ã«æ³¨æ„

### 2. å¤–éƒ¨APIé€£æºï¼ˆGemini APIï¼‰
- å†ç”Ÿæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆPOST /api/posts/:id/regenerateï¼‰
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 10ç§’
- ãƒªãƒˆãƒ©ã‚¤: æœ€å¤§3å›ï¼ˆæŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•: 1ç§’ã€2ç§’ã€4ç§’ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:
  - 429 Too Many Requests â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - 503 Service Unavailable â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œä¸€æ™‚çš„ã«åˆ©ç”¨ã§ãã¾ã›ã‚“ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### 3. å®šæœŸæŠ•ç¨¿ã¨ã®é€£æº
- æŠ•ç¨¿ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒ`scheduled`ã§ã‹ã¤`is_approved`ãŒ`true`ã®å ´åˆã®ã¿è‡ªå‹•æŠ•ç¨¿
- Upstash QStashã§æ¯æ™‚0åˆ†ã«å®Ÿè¡Œ
- æŠ•ç¨¿å¾Œã¯`status`ã‚’`posted`ã«ã€`posted_at`ã¨`twitter_tweet_id`ã‚’è¨­å®š

### 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§èªè¨¼ãƒã‚§ãƒƒã‚¯å¿…é ˆ
- user_idã¯å¿…ãšã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰å–å¾—ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®é€ä¿¡ã‚’ä¿¡é ¼ã—ãªã„ï¼‰
- XSSå¯¾ç­–: æŠ•ç¨¿å†…å®¹ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºï¼ˆãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒ»@ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã®ã¿è¨±å¯ï¼‰

### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- æŠ•ç¨¿ä¸€è¦§å–å¾—ã¯ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ¨å¥¨ï¼ˆPhase 2ã§å®Ÿè£…ï¼‰
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: `user_id`, `scheduled_at`, `status`

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´11æœˆ21æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0ï¼ˆPhase 1 MVPï¼‰
